import React, {useEffect, useState} from 'react'
import '../styles/components/footer.css'
import {Link} from "react-router-dom"

function Footer() {
    const [user, setUser] = useState({})

    useEffect(() => {
        fetch('/api/user')
            .then(response => response.json())
            .then(data => setUser(data))
    }, [])

    function resolveLink() {
        if (Object.keys(user).length === 0) {
            return (
                <Link className='footer-nav-link' to='/login'>Log in</Link>
            )
        } else {
            return (
                <Link className='footer-nav-link' to={`/profile/${user.id}`}>Profile</Link>
            )
        }
    }

    return (
        <div className='footer'>
            <div className='footer-body'>
                <nav className='footer-nav'>
                    <Link className='footer-nav-link' to='/'>Home</Link>
                    <Link className='footer-nav-link' to='/search'>Search</Link>
                    <Link className='footer-nav-link' to='/article/create'>Add article</Link>
                    {resolveLink()}
                </nav>
                <div className='socials'>
                    <svg className='socials-svg' width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M40 20C40 8.95125 31.0413 0 20 0C8.95125 0 0 8.95125 0 20C0 29.98 7.31125 38.255 16.875 39.7537V25.7825H11.7963V20.0012H16.875V15.5925C16.875 10.5813 19.8563 7.81375 24.4263 7.81375C26.615 7.81375 28.9062 8.20375 28.9062 8.20375V13.125H26.38C23.9 13.125 23.125 14.6688 23.125 16.25V20H28.6713L27.78 25.7812H23.125V39.7525C32.6812 38.2538 40 29.9787 40 19.9987V20Z" fill="#FEFCFD"/>
                    </svg>
                    <svg className='socials-svg' width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M20 0C14.5631 0 13.8855 0.0262533 11.7577 0.116265C9.6212 0.221278 8.17602 0.552569 6.90086 1.04763C5.5857 1.5627 4.46556 2.24653 3.35917 3.35917C2.24528 4.46556 1.55519 5.5857 1.04763 6.90086C0.552569 8.17602 0.221278 9.6212 0.116265 11.7577C0.0200025 13.8867 0 14.5631 0 20C0 25.4369 0.0262533 26.1145 0.116265 28.2423C0.221278 30.3725 0.552569 31.824 1.04763 33.0991C1.5627 34.4143 2.24653 35.5344 3.35917 36.6408C4.46556 37.7547 5.5857 38.4448 6.90086 38.9524C8.17602 39.4412 9.62745 39.7787 11.7577 39.8837C13.8867 39.98 14.5631 40 20 40C25.4369 40 26.1145 39.9738 28.2423 39.8837C30.3725 39.7787 31.824 39.4399 33.0991 38.9524C34.4143 38.4373 35.5344 37.7535 36.6408 36.6408C37.7547 35.5344 38.4448 34.4206 38.9524 33.0991C39.4412 31.824 39.7787 30.3725 39.8837 28.2423C39.98 26.1133 40 25.4369 40 20C40 14.5631 39.9737 13.8855 39.8837 11.7577C39.7787 9.62745 39.4399 8.16852 38.9524 6.90086C38.4373 5.5857 37.7535 4.46556 36.6408 3.35917C35.5344 2.24528 34.4206 1.55519 33.0991 1.04763C31.824 0.552569 30.3725 0.221278 28.2423 0.116265C26.1133 0.0200025 25.4369 0 20 0ZM20 3.60045C25.3394 3.60045 25.977 3.6267 28.0873 3.71672C30.0338 3.80798 31.0939 4.13302 31.7977 4.40805C32.7366 4.77185 33.3929 5.2019 34.103 5.90449C34.7993 6.60083 35.2294 7.26466 35.5932 8.20353C35.8682 8.90736 36.1933 9.9675 36.2845 11.914C36.3745 14.0243 36.4008 14.6631 36.4008 20.0013C36.4008 25.3394 36.3745 25.9783 36.277 28.0885C36.172 30.035 35.847 31.0951 35.5732 31.799C35.1944 32.7378 34.7718 33.3942 34.0743 34.1043C33.3704 34.8006 32.7003 35.2307 31.769 35.5945C31.0739 35.8695 29.9987 36.1945 28.0448 36.2858C25.9232 36.3758 25.2982 36.4021 19.945 36.4021C14.5918 36.4021 13.968 36.3758 11.844 36.2783C9.89749 36.1733 8.8236 35.8482 8.11977 35.5744C7.16965 35.1957 6.51832 34.7731 5.82073 34.0755C5.11689 33.3717 4.66933 32.7016 4.32429 31.7702C4.04426 31.0751 3.72422 30 3.62045 28.046C3.54919 25.9495 3.51544 25.2994 3.51544 19.9712C3.51544 14.6456 3.54919 13.9943 3.62045 11.8715C3.72422 9.91749 4.04426 8.84486 4.32429 8.14727C4.66933 7.1959 5.11814 6.54582 5.82073 5.84198C6.51706 5.14564 7.16965 4.69559 8.11977 4.34304C8.8236 4.06926 9.87123 3.74422 11.8252 3.64671C13.9467 3.57045 14.5718 3.54294 19.9175 3.54294L20 3.60045ZM20 9.73497C14.323 9.73497 9.73247 14.3318 9.73247 20.0025C9.73247 25.6795 14.3293 30.27 20 30.27C25.677 30.27 30.2675 25.6732 30.2675 20.0025C30.2675 14.3255 25.6707 9.73497 20 9.73497ZM20 26.6696C16.3145 26.6696 13.3329 23.688 13.3329 20.0025C13.3329 16.317 16.3145 13.3354 20 13.3354C23.6855 13.3354 26.6671 16.317 26.6671 20.0025C26.6671 23.688 23.6855 26.6696 20 26.6696ZM33.0816 9.32492C33.0816 10.6538 32.0002 11.7265 30.6776 11.7265C29.3487 11.7265 28.276 10.6526 28.276 9.32492C28.276 8.0035 29.3562 6.92837 30.6776 6.92837C31.999 6.92837 33.0816 8.0035 33.0816 9.32492Z" fill="#FEFCFD"/>
                    </svg>
                    <svg className='socials-svg' width="40" height="33" viewBox="0 0 40 33" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M39.9238 3.87375C38.4525 4.51875 36.8775 4.9625 35.2175 5.16375C36.9113 4.1475 38.2063 2.54 38.8238 0.625C37.235 1.55 35.4775 2.22 33.6088 2.59875C32.1188 1.00375 29.9888 0 27.625 0C23.0938 0 19.4212 3.67125 19.4212 8.19625C19.4212 8.8475 19.5 9.4725 19.6362 10.065C12.82 9.74625 6.7775 6.47125 2.73625 1.52375C2.02625 2.72875 1.6225 4.12875 1.6225 5.6525C1.6225 8.50375 3.07375 11.0038 5.2675 12.4738C3.92625 12.435 2.66375 12.0638 1.5575 11.4525V11.5512C1.5575 15.5275 4.3825 18.8425 8.1325 19.5975C7.44875 19.7788 6.71875 19.8837 5.9775 19.8837C5.45125 19.8837 4.94875 19.8325 4.4475 19.74C5.5025 22.995 8.5225 25.365 12.1225 25.4363C9.32375 27.63 5.77625 28.9375 1.95375 28.9375C1.3025 28.9375 0.6525 28.9063 0 28.8275C3.64625 31.1525 7.95 32.5125 12.5987 32.5125C27.6825 32.5125 35.925 20.0187 35.925 9.19875C35.925 8.85375 35.925 8.5025 35.8987 8.15C37.5075 7.00375 38.9 5.55125 40 3.905L39.9238 3.87375Z" fill="#FEFCFD"/>
                    </svg>
                    <svg className='socials-svg' width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M20 0C8.95097 0 0 8.95226 0 20C0 31.0477 8.95226 40 20 40C31.049 40 40 31.0477 40 20C40 8.95226 31.0477 0 20 0ZM29.8232 13.7019L26.5406 29.1703C26.2981 30.2671 25.6452 30.5329 24.7342 30.0168L19.7342 26.3316L17.3226 28.6542C17.0568 28.92 16.831 29.1458 16.3148 29.1458L16.6697 24.0568L25.9355 15.6852C26.3394 15.3303 25.8465 15.129 25.3135 15.4839L13.8619 22.6929L8.92645 21.1523C7.85419 20.8142 7.82968 20.08 9.15226 19.5639L28.4348 12.1277C29.3303 11.8052 30.1123 12.3458 29.8219 13.7006L29.8232 13.7019Z" fill="#FEFCFD"/>
                    </svg>
                </div>
            </div>
        </div>
    )
}

export default Footer